import{r as o,b as R,j as e,e as c}from"./index-21aef9be.js";import{S as f}from"./sweetalert2.all-3c97b21a.js";import{f as _}from"./ModalCreate-9a1db2ae.js";import{b as V,c as k}from"./ModalEditTour-f464d374.js";import"./index.esm-89d4b198.js";import"./index.esm-47ae80ff.js";const z="https://fastapi-gv342xsbja-tl.a.run.app/eliminar_producto",$=async n=>{const x={inventory_id:n.inventarioId},u=new URLSearchParams(x).toString(),p=`${z}?${u}`,i={method:"DELETE",headers:{Accept:"application/json",Authorization:`Bearer ${n.access_token}`}};try{const a=await fetch(p,i);if(!a.ok){const d=await a.text();throw new Error(`API Error (${a.status}): ${d}`)}return await a.json()}catch(a){throw new Error("API Error: "+a.message||"Error al eliminar el inventario")}},H="https://fastapi-gv342xsbja-tl.a.run.app/productos",J=()=>{const[n,x]=o.useState(null),[u,p]=o.useState([]),[i,a]=o.useState(""),{user:d}=R(),h=()=>{const t={method:"GET",headers:{Accept:"application/json",Authorization:`Bearer ${d.access_token}`}};fetch(H,t).then(r=>r.json()).then(r=>{console.log(r),p(r)}).catch(r=>console.log(r))};o.useEffect(()=>{h()},[]);const E=t=>e.jsxs("div",{className:"font-extrabold flex items-center gap-x-6",children:[e.jsx(c.Tooltip,{content:"Editar producto",placement:"top",children:e.jsx("button",{onClick:r=>{A(r,t)},className:"rounded-lg  relative w-12 h-10 overflow-x-hidden cursor-pointer flex items-center border border-blue-500 bg-blue-300 group  active:bg-blue-500 active:border-blue-500",href:"{{ route('process.create') }}",children:e.jsx("span",{className:"absolute right-0 h-full w-11 rounded-lg bg-blue-300 hover:bg-blue-500 flex items-center justify-center transform group-hover:translate-x-0 group-hover:w-full transition-all duration-300",children:e.jsx("svg",{style:{fill:"#fff"},xmlns:"http://www.w3.org/2000/svg",height:"1.5rem",viewBox:"0 0 512 512",children:e.jsx("path",{d:"M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"})})})})}),e.jsx(c.Tooltip,{content:"Borrar producto",placement:"top",children:e.jsx("button",{onClick:r=>{L(r,t)},className:"rounded-lg  relative w-12 h-10 overflow-x-hidden cursor-pointer flex items-center border border-red-500 bg-red-300 group active:bg-red-500 active:border-red-500",href:"{{ route('process.create') }}",children:e.jsx("span",{className:"absolute right-0 h-full w-11 rounded-lg bg-red-300 hover:bg-red-500 flex items-center justify-center transform group-hover:translate-x-0 group-hover:w-full transition-all duration-300",children:e.jsx("svg",{style:{fill:"#fff"},xmlns:"http://www.w3.org/2000/svg",height:"1.5rem",viewBox:"0 0 448 512",children:e.jsx("path",{d:"M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"})})})})})]}),C=t=>{t.key==="Enter"&&t.preventDefault()},w=u.filter(t=>Object.values(t).some(r=>r.toString().toLowerCase().includes(i.toLowerCase()))),m=w.length,l=10,[s,M]=o.useState(1),j=Math.ceil(m/l),v=(s-1)*l+1,T=Math.min(v+l-1,m),b=t=>{M(t)},[I,y]=o.useState(!1),P=t=>{t.preventDefault(),y(!0)},S=()=>{h(),y(!1)},[B,N]=o.useState(!1),A=(t,r)=>{t.preventDefault(),x(r),N(!0)},D=()=>{h(),N(!1)},L=(t,r)=>{t.preventDefault();try{const g={access_token:d.access_token,inventarioId:r};f.fire({title:"¿Estás seguro?",text:"No podrás revertir esta acción",icon:"warning",showCancelButton:!0,confirmButtonColor:"#4299e1",cancelButtonColor:"#EF4444",confirmButtonText:"Si, borrar producto",cancelButtonText:"Cancelar"}).then(O=>{O.isConfirmed&&($(g),h(),f.fire({icon:"success",title:"Producto eliminado",text:"El producto se ha eliminado correctamente",confirmButtonText:"Ok"}))})}catch(g){f.fire({icon:"error",title:"Error al eliminar producto",text:g,confirmButtonText:"Ok"})}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col items-center ",children:e.jsx(c.Typography,{variant:"h3",children:"Administración de productos"})}),e.jsxs("div",{className:"flex flex-col justify-start gap-2",children:[e.jsx(c.Typography,{variant:"h5",color:"blue-gray",children:"Lista de productos"}),e.jsx(c.Typography,{color:"gray",className:" font-normal",children:"En esta Seccion podras gestionar los productos."})]}),e.jsxs("section",{className:"my-3 w-full",children:[e.jsx("div",{className:"bg-gray-100 p-1",children:e.jsx("div",{className:"mx-auto",children:e.jsxs("div",{className:"bg-white  relative shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between space-y-3 md:space-y-0 md:space-x-4 p-4",children:[e.jsx("div",{className:"w-full md:w-1/2",children:e.jsxs("form",{className:"flex items-center",children:[e.jsx("label",{htmlFor:"simple-search",className:"sr-only",children:"Buscar"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx("svg",{"aria-hidden":"true",className:"w-5 h-5 text-red-500 ",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fill:"#000000",fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),e.jsx("input",{type:"text",id:"simple-search",value:i,onChange:t=>a(t.target.value),onKeyDown:C,className:"bg-gray-100 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2",placeholder:"Buscar",required:""})]})]})}),e.jsx("div",{children:e.jsx("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",onClick:P,children:" Crear producto "})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left text-gray-500  ",children:[e.jsx("thead",{className:"text-md text-gray-700 bg-blue-100  text-center",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-3 w-auto",children:"ID"}),e.jsx("th",{scope:"col",className:"px-4 py-3 w-auto",children:"Nombre"}),e.jsx("th",{scope:"col",className:"px-4 py-3 w-auto",children:"Costo"}),e.jsx("th",{scope:"col",className:"px-4 py-3 w-auto",children:"Porcentaje de Multa"}),e.jsx("th",{scope:"col",className:"relative py-3.5 px-4 w-auto",children:"Acciones"})]})}),e.jsx("tbody",{children:w.slice((s-1)*l,s*l).map(t=>e.jsxs("tr",{className:"hover:bg-gray-100 italic text-center",children:[e.jsx("td",{className:"px-4 py-4 text-sm text-gray-700 whitespace-nowrap",children:t.INVENTARIO_ID}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-500 whitespace-nowrap",children:t.NOMBRE}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-500 whitespace-nowrap",children:_(t.VALOR)}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-500 whitespace-nowrap",children:t.PORCENTAJE_MULTA}),e.jsx("td",{className:"px-4 py-4 text-sm flex items-center justify-center",children:E(t.INVENTARIO_ID)})]},t.INVENTARIO_ID))})]})}),e.jsxs("nav",{className:"flex flex-col md:flex-row justify-between items-start md:items-center space-y-3 md:space-y-0 p-4","aria-label":"Table navigation",children:[e.jsxs("span",{id:"info",className:"text-sm font-normal text-gray-500 ",children:["Mostrar",e.jsxs("span",{className:"font-semibold text-gray-900 mx-2 ",children:[v,"-",T]}),"de",e.jsx("span",{className:"font-semibold text-gray-900 mx-2 ",children:m})]}),e.jsxs("ul",{className:"inline-flex items-stretch -space-x-px",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>b(s-1),disabled:s<=1,className:`flex items-center justify-center h-full py-1.5 px-3 ml-0 text-gray-500 bg-white rounded-l-lg border border-gray-300 ${s<=1?"cursor-not-allowed":"hover:bg-gray-100 hover:text-gray-700"}`,children:e.jsx("svg",{className:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fill:"#000000",fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})})}),e.jsx("li",{children:e.jsx("span",{className:"flex items-center justify-center text-sm py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700",children:s})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>b(s+1),disabled:s>=j,className:`flex items-center justify-center h-full py-1.5 px-3 leading-tight text-gray-500 bg-white rounded-r-lg border border-gray-300 ${s>=j?"cursor-not-allowed":"hover:bg-gray-100 hover:text-gray-700"}`,children:e.jsx("svg",{className:"w-5 h-5","aria-hidden":"true",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fill:"#000000",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})})]})]})]})})}),e.jsx(V,{onClose:S,showModal:I}),e.jsx(k,{onClose:D,showModal:B,productosId:n})]})]})};export{J as default};
