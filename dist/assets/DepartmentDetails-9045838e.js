import{j as e,i as o,r as m,e as a,b as H,l as A}from"./index-21aef9be.js";import{D as z}from"./index.esm-47ae80ff.js";import{S as M}from"./sweetalert2.all-3c97b21a.js";import{a as L}from"./DepartmentCard-f30b161b.js";import{l as V}from"./iconoTurismoReal_logo-2c08bdb6.js";import{c as q,a as F,b as k,u as U,o as $}from"./index.esm-89d4b198.js";const G=()=>e.jsx(e.Fragment,{children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",className:"h-5 w-5",children:e.jsx("path",{fillRule:"evenodd",d:"M1.371 8.143c5.858-5.857 15.356-5.857 21.213 0a.75.75 0 010 1.061l-.53.53a.75.75 0 01-1.06 0c-4.98-4.979-13.053-4.979-18.032 0a.75.75 0 01-1.06 0l-.53-.53a.75.75 0 010-1.06zm3.182 3.182c4.1-4.1 10.749-4.1 14.85 0a.75.75 0 010 1.061l-.53.53a.75.75 0 01-1.062 0 8.25 8.25 0 00-11.667 0 .75.75 0 01-1.06 0l-.53-.53a.75.75 0 010-1.06zm3.204 3.182a6 6 0 018.486 0 .75.75 0 010 1.061l-.53.53a.75.75 0 01-1.061 0 3.75 3.75 0 00-5.304 0 .75.75 0 01-1.06 0l-.53-.53a.75.75 0 010-1.06zm3.182 3.182a1.5 1.5 0 012.122 0 .75.75 0 010 1.061l-.53.53a.75.75 0 01-1.061 0l-.53-.53a.75.75 0 010-1.06z",clipRule:"evenodd"})})}),K=()=>e.jsx(e.Fragment,{children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",className:"h-5 w-5",children:[e.jsx("path",{d:"M19.5 6h-15v9h15V6z"}),e.jsx("path",{fillRule:"evenodd",d:"M3.375 3C2.339 3 1.5 3.84 1.5 4.875v11.25C1.5 17.16 2.34 18 3.375 18H9.75v1.5H6A.75.75 0 006 21h12a.75.75 0 000-1.5h-3.75V18h6.375c1.035 0 1.875-.84 1.875-1.875V4.875C22.5 3.839 21.66 3 20.625 3H3.375zm0 13.5h17.25a.375.375 0 00.375-.375V4.875a.375.375 0 00-.375-.375H3.375A.375.375 0 003 4.875v11.25c0 .207.168.375.375.375z",clipRule:"evenodd"})]})}),W=()=>e.jsx(e.Fragment,{children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 512 512",style:{fill:"currentColor"},"aria-hidden":"true",className:"h-5 w-5",children:e.jsx("path",{d:"M135.2 117.4L109.1 192H402.9l-26.1-74.6C372.3 104.6 360.2 96 346.6 96H165.4c-13.6 0-25.7 8.6-30.2 21.4zM39.6 196.8L74.8 96.3C88.3 57.8 124.6 32 165.4 32H346.6c40.8 0 77.1 25.8 90.6 64.3l35.2 100.5c23.2 9.6 39.6 32.5 39.6 59.2V400v48c0 17.7-14.3 32-32 32H448c-17.7 0-32-14.3-32-32V400H96v48c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32V400 256c0-26.7 16.4-49.6 39.6-59.2zM128 288a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm288 32a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"})})}),X=()=>e.jsx(e.Fragment,{children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 576 512",style:{fill:"currentColor"},"aria-hidden":"true",className:"h-5 w-5",children:e.jsx("path",{d:"M570.9 372.3c-11.3 14.2-38.8 24.3-38.8 24.3L327 470.2v-54.3l150.9-53.8c17.1-6.1 19.8-14.8 5.8-19.4-13.9-4.6-39.1-3.3-56.2 2.9L327 381.1v-56.4c23.2-7.8 47.1-13.6 75.7-16.8 40.9-4.5 90.9.6 130.2 15.5 44.2 14 49.2 34.7 38 48.9zm-224.4-92.5v-139c0-16.3-3-31.3-18.3-35.6-11.7-3.8-19 7.1-19 23.4v347.9l-93.8-29.8V32c39.9 7.4 98 24.9 129.2 35.4C424.1 94.7 451 128.7 451 205.2c0 74.5-46 102.8-104.5 74.6zM43.2 410.2c-45.4-12.8-53-39.5-32.3-54.8 19.1-14.2 51.7-24.9 51.7-24.9l134.5-47.8v54.5l-96.8 34.6c-17.1 6.1-19.7 14.8-5.8 19.4 13.9 4.6 39.1 3.3 56.2-2.9l46.4-16.9v48.8c-51.6 9.3-101.4 7.3-153.9-10z"})})}),Y=()=>e.jsx(e.Fragment,{children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 640 512",style:{fill:"currentColor"},"aria-hidden":"true",className:"h-5 w-5",children:e.jsx("path",{d:"M96 64c0-17.7 14.3-32 32-32h32c17.7 0 32 14.3 32 32V224v64V448c0 17.7-14.3 32-32 32H128c-17.7 0-32-14.3-32-32V384H64c-17.7 0-32-14.3-32-32V288c-17.7 0-32-14.3-32-32s14.3-32 32-32V160c0-17.7 14.3-32 32-32H96V64zm448 0v64h32c17.7 0 32 14.3 32 32v64c17.7 0 32 14.3 32 32s-14.3 32-32 32v64c0 17.7-14.3 32-32 32H544v64c0 17.7-14.3 32-32 32H480c-17.7 0-32-14.3-32-32V288 224 64c0-17.7 14.3-32 32-32h32c17.7 0 32 14.3 32 32zM416 224v64H224V224H416z"})})}),J=()=>e.jsx(e.Fragment,{children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 576 512",style:{fill:"currentColor"},"aria-hidden":"true",className:"h-5 w-5",children:e.jsx("path",{d:"M309.5 178.4L447.9 297.1c-1.6 .9-3.2 2-4.8 3c-18 12.4-40.1 20.3-59.2 20.3c-19.6 0-40.8-7.7-59.2-20.3c-22.1-15.5-51.6-15.5-73.7 0c-17.1 11.8-38 20.3-59.2 20.3c-10.1 0-21.1-2.2-31.9-6.2C163.1 193.2 262.2 96 384 96h64c17.7 0 32 14.3 32 32s-14.3 32-32 32H384c-26.9 0-52.3 6.6-74.5 18.4zM160 160A64 64 0 1 1 32 160a64 64 0 1 1 128 0zM306.5 325.9C329 341.4 356.5 352 384 352c26.9 0 55.4-10.8 77.4-26.1l0 0c11.9-8.5 28.1-7.8 39.2 1.7c14.4 11.9 32.5 21 50.6 25.2c17.2 4 27.9 21.2 23.9 38.4s-21.2 27.9-38.4 23.9c-24.5-5.7-44.9-16.5-58.2-25C449.5 405.7 417 416 384 416c-31.9 0-60.6-9.9-80.4-18.9c-5.8-2.7-11.1-5.3-15.6-7.7c-4.5 2.4-9.7 5.1-15.6 7.7c-19.8 9-48.5 18.9-80.4 18.9c-33 0-65.5-10.3-94.5-25.8c-13.4 8.4-33.7 19.3-58.2 25c-17.2 4-34.4-6.7-38.4-23.9s6.7-34.4 23.9-38.4c18.1-4.2 36.2-13.3 50.6-25.2c11.1-9.4 27.3-10.1 39.2-1.7l0 0C136.7 341.2 165.1 352 192 352c27.5 0 55-10.6 77.5-26.1c11.1-7.9 25.9-7.9 37 0z"})})}),O=({handleOpenModal:r,MAX_HUESPEDES:n=0,TARIFA_DIARIA:s,DIAS_RESERVADOS:h,onTotalCostChange:p,onTotalPersonChange:l,onDateSelected:g})=>{const[f,b]=m.useState(0),N=t=>{t=parseInt(t),b(t),l&&l(t)},[w,y]=m.useState([]);m.useEffect(()=>{if(h){const t=h.map(d=>({startDate:d.STARTDATE,endDate:d.ENDDATE}));y(t)}},[h]);const u=(t,d)=>{const D=new Date(t),T=new Date(d);D.setHours(0,0,0,0),T.setHours(0,0,0,0);const B=Math.abs(T.getTime()-D.getTime());return Math.ceil(B/(1e3*3600*24))+1},[j,E]=m.useState({startDate:null,endDate:null}),x=t=>{E(t);const d=u(t.startDate,t.endDate);if(g&&g(t),p){const D=s*d;p(D)}},v=u(j.startDate,j.endDate),c=s*v,i=new Date,C=new Date;C.setFullYear(i.getFullYear()+1);const S=t=>{f===0?M.fire({icon:"error",title:"Uups...",text:"Debe seleccionar al menos 1 huésped para realizar la reserva!"}):r(t)},_=s&&typeof s=="number"?s.toLocaleString("de-DE"):"0,00";return e.jsxs(a.Card,{className:"mt-6 w-96",children:[e.jsxs(a.CardBody,{className:"rounded-t-lg bg-gray-50 border-gray-900",children:[e.jsxs(a.Typography,{variant:"h5",color:"blue-gray",className:"mb-4 text-center",children:["$ ",_,"  x Noche con IVa"]}),e.jsx("div",{className:"bg-gray-200 p-2 rounded-lg my-6",children:e.jsx(z,{useRange:!1,value:j,readOnly:!0,onChange:x,minDate:i,maxDate:C,primaryColor:"green",disabledDates:w})}),e.jsx("div",{className:"w-full p-2",children:e.jsx(a.Select,{color:"blue",className:"text-lg",label:"Huespedes",onChange:t=>N(t),children:Array.from({length:n}).map((t,d)=>e.jsxs(a.Option,{value:(d+1).toString(),children:[d+1," Huespedes"]},d))})}),e.jsx("div",{className:"py-2 font-normal text-base text-center",children:e.jsxs("span",{children:["Total $ ",c.toLocaleString("de-DE")," "]})})]}),e.jsx(a.CardFooter,{className:"pt-1 rounded-b-lg bg-gray-100",children:e.jsx(a.Button,{className:"w-full",onClick:t=>S(t),children:"Solicitar reserva"})})]})};O.propTypes={MAX_HUESPEDES:o.number,TARIFA_DIARIA:o.number,DIAS_RESERVADOS:o.array,handleOpenModal:o.func.isRequired,onTotalCostChange:o.func.isRequired,onTotalPersonChange:o.func.isRequired,onDateSelected:o.func.isRequired};const Q={Wifi:e.jsx(G,{}),Piscina:e.jsx(J,{}),"TV Cable":e.jsx(K,{}),Estacionamiento:e.jsx(W,{}),Playstation:e.jsx(X,{}),Gimnasio:e.jsx(Y,{})},R=({SERVICIOS:r})=>e.jsx(a.Card,{className:"w-full bg-gray-50",children:e.jsx(a.List,{children:r==null?void 0:r.map(n=>e.jsxs(a.ListItem,{ripple:!1,className:"py-1 pr-1 pl-4",children:[n.NOMBRE,e.jsx(a.ListItemSuffix,{children:e.jsx(a.IconButton,{variant:"text",color:"blue-gray",children:Q[n.NOMBRE]})})]},n.SERVICIO_ID))})});R.propTypes={SERVICIOS:o.array};const Z="https://fastapi-gv342xsbja-tl.a.run.app/crear_reserva",I=async r=>{const n={start_date:r.start_date,end_date:r.end_date,reservation_value:r.reservation_value,reservation_debt:r.reservation_debt,reservation_total:r.reservation_total,department_id:r.department_id,num_hosts:r.num_hosts},s=new URLSearchParams(n).toString(),h=`${Z}?${s}`,p={method:"POST",headers:{Accept:"application/json",Authorization:`Bearer ${r.access_token}`}};try{const l=await fetch(h,p);if(!l.ok){const g=await l.text();throw new Error(`API Error (${l.status}): ${g}`)}return l.json()}catch(l){throw new Error("API Error: "+l.message||"Error al reservar departamento")}},ee=q({nombreCompleto:F().required("El nombre es obligatorio").min(3,"El nombre debe tener al menos 3 caracteres").max(50,"El nombre debe tener como máximo 50 caracteres"),telefono:k().typeError("El teléfono debe ser un número").required("El teléfono es obligatorio").positive("El número de teléfono debe ser positivo").integer("El número de teléfono no puede incluir un punto decimal").min(1e7,"El teléfono debe tener al menos 8 dígitos").max(99999999999,"El teléfono debe tener como máximo 11 dígitos")}),P=({idDepartamento:r,parentTotalCost:n,NOMBRE_TOUR:s,NOMBRE_COMUNA:h,NOMBRE_REGION:p,onClose:l,showModal:g,parentHuesped:f,parentDateSelected:b})=>{const{user:N}=H(),{register:w,handleSubmit:y,formState:{errors:u},reset:j}=U({resolver:$(ee)}),E=async()=>{try{if(!N)throw new Error("Para continuar, debes iniciar sesión");const{startDate:x,endDate:v}=b,c=n,i=n,C=n,S=r,_=f,t={access_token:N.access_token,start_date:x,end_date:v,reservation_value:c,reservation_debt:i,reservation_total:C,department_id:S,num_hosts:_};await I(t),l(),j(),M.fire({icon:"success",title:"Pago exitoso",text:"¡Tu pago se ha realizado con éxito!",confirmButtonText:"Ok"})}catch(x){l(),console.error(x),M.fire({icon:"error",title:"Error en el pago",text:x,confirmButtonText:"Entendido"})}};return e.jsx(e.Fragment,{children:e.jsxs(a.Dialog,{open:g,className:"my-auto bg-white shadow-lg shadow-blue-700",children:[e.jsxs(a.DialogHeader,{className:"text-lg flex justify-between items-center my-auto",children:[e.jsx("span",{children:s}),e.jsx("div",{children:e.jsx("img",{className:"h-16 object-cover",src:V,alt:"Logo Real"})}),e.jsxs("div",{className:"grid grid-cols-1 text-xs",children:[e.jsx("span",{children:h}),e.jsx("span",{children:p})]})]}),e.jsxs("form",{onSubmit:y(E),children:[e.jsxs(a.DialogBody,{children:[e.jsx("div",{className:"flex flex-col items-center ",children:e.jsx(a.Typography,{variant:"h5",children:"Resumen de reserva"})}),e.jsxs("div",{className:"flex justify-between items-center py-4",children:[e.jsxs(a.Typography,{variant:"paragraph",children:["Huespedes:  ",f]}),e.jsxs(a.Typography,{variant:"paragraph",children:["Total costo diario: $",n.toLocaleString("de-DE")]})]}),e.jsx("div",{className:"text-base flex justify-start",children:e.jsx("h5",{className:"italic",children:"Lista de Huespedes"})}),Array.from({length:f}).map((x,v)=>e.jsxs("div",{className:"grid md:grid-cols-2 grid-cols-1 gap-6 mt-6 mx-3",children:[e.jsxs("div",{className:"flex flex-col justify-center",children:[e.jsx("input",{type:"text",name:"nombreCompleto",placeholder:"Nombre Completo",...w("nombreCompleto"),className:"w-full border border-gray-500 rounded-md py-2 px-3 focus:outline-none focus:border-blue-700 "}),u.nombreCompleto&&e.jsx("p",{className:"text-red-500",children:u.nombreCompleto.message})]}),e.jsxs("div",{className:"flex flex-col justify-center items-center",children:[e.jsx("input",{type:"number",name:"telefono",...w("telefono"),placeholder:"Telefono",className:"w-full border border-gray-500 rounded-md py-2 px-3 focus:outline-none focus:border-blue-700"}),u.telefono&&e.jsx("p",{className:"text-red-500",children:u.telefono.message})]})]},v))]}),e.jsxs(a.DialogFooter,{children:[e.jsx(a.Button,{variant:"text",color:"red",onClick:l,className:"mr-1",children:e.jsx("span",{children:"Cancelar"})}),e.jsx(a.Button,{variant:"gradient",color:"green",type:"submit",children:e.jsx("span",{children:"Confirmar Reserva"})})]})]})]})})};P.propTypes={idDepartamento:o.number,onClose:o.func.isRequired,showModal:o.bool.isRequired,parentTotalCost:o.number.isRequired,NOMBRE_TOUR:o.string,NOMBRE_COMUNA:o.string,NOMBRE_REGION:o.string,parentHuesped:o.number.isRequired,parentDateSelected:o.object.isRequired};const ce=()=>{const{id:r}=A(),n=`https://fastapi-gv342xsbja-tl.a.run.app/departamentos/${r}`,[s,h]=m.useState(null);m.useEffect(()=>{fetch(n,{method:"GET"}).then(i=>i.json()).then(i=>{h(i)}).catch(i=>console.log(i))},[r,n]);const[p,l]=m.useState(!1),g=c=>{c.preventDefault(),l(!0)},f=()=>{l(!1)},[b,N]=m.useState(0),w=c=>{N(c)},[y,u]=m.useState(0),j=c=>{u(c)},[E,x]=m.useState({startDate:null,endDate:null}),v=c=>{x(c)};return e.jsx(e.Fragment,{children:e.jsxs("section",{className:"py-10 mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex justify-start items-center py-6",children:e.jsxs("h4",{className:" antialiased tracking-normal leading-5  text-2xl font-semibold decoration-inherit ",children:[s==null?void 0:s.NOMBRE," ",e.jsxs("span",{className:"font-light text-xl",children:[" - ",s==null?void 0:s.TIPO]})]})}),e.jsx("div",{className:"mb-6",children:e.jsxs("h6",{className:"font-light text-base leading-3 ",children:[s==null?void 0:s.NOMBRE_REGION,"  -  ",s==null?void 0:s.NOMBRE_COMUNA]})}),e.jsxs("div",{className:"grid w-full grid-cols-1 md:grid-cols-2 py-6 gap-4",children:[e.jsxs("div",{className:"grid grid-cols-2 grid-rows-2 w-full h-full gap-2",children:[e.jsx("img",{src:"https://images.pexels.com/photos/2635835/pexels-photo-2635835.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",className:"row-span-1  rounded-l-lg w-full h-full",alt:"prod1"}),e.jsx("img",{src:"https://images.pexels.com/photos/161124/abbaye-de-senanque-monastery-abbey-notre-dame-de-senanque-161124.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",alt:"prod2",className:" w-full h-full"}),e.jsx("img",{src:"https://media.istockphoto.com/id/1165384568/es/foto/complejo-moderno-de-edificios-residenciales-en-europa.jpg?s=2048x2048&w=is&k=20&c=E9ddfbNLOJw0NKIaKF6180TLCPuC4Se00DoCzf2VwFA=",alt:"prod3",className:"  rounded-l-lg w-full h-full"}),e.jsx("img",{src:"https://media.istockphoto.com/id/1165384568/es/foto/complejo-moderno-de-edificios-residenciales-en-europa.jpg?s=2048x2048&w=is&k=20&c=E9ddfbNLOJw0NKIaKF6180TLCPuC4Se00DoCzf2VwFA=",alt:"prod4",className:" w-full h-full"})]}),e.jsx("div",{className:"flex justify-center w-full h-full",children:e.jsx("img",{src:"https://images.pexels.com/photos/7129137/pexels-photo-7129137.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",className:"w-full  rounded-r-lg",alt:"prod5"})})]}),e.jsxs("div",{className:"grid grid-cols-2 mt-12",children:[e.jsxs("div",{className:"col-span-1 h-full w-full",children:[e.jsxs("p",{className:"block antialiased  text-lg font-normal decoration-inherit mb-5 mt-3  leading-[27px]  pb-12",children:["Descripción: ",s==null?void 0:s.DESCRIPCION]}),e.jsx("article",{className:"my-12",children:e.jsxs("ul",{className:"flex items-center justify-between text-base font-light leading-relaxed text-gray-700 antialiased",children:[e.jsxs("li",{children:["Baños: ",s==null?void 0:s.BANOS," "]}),e.jsxs("li",{children:["Camas:",s==null?void 0:s.CAMAS," "]}),e.jsxs("li",{children:["Habitaciones: ",s==null?void 0:s.DORMITORIOS]})]})}),e.jsxs("div",{className:"mb-8 mt-3 flex flex-col items-start  gap-4",children:[e.jsx("span",{className:"text-lg font-normal",children:"Servicios"}),s&&e.jsx(R,{SERVICIOS:s.SERVICIOS})]})]}),e.jsx("div",{className:"col-span-1 flex flex-col items-center ",children:e.jsx(O,{onDateSelected:v,onTotalPersonChange:j,onTotalCostChange:w,handleOpenModal:g,MAX_HUESPEDES:s==null?void 0:s.MAX_HUESPEDES,TARIFA_DIARIA:s==null?void 0:s.TARIFA_DIARIA,DIAS_RESERVADOS:s==null?void 0:s.DIAS_RESERVADOS})}),e.jsx(P,{showModal:p,onClose:f,idDepartamento:s==null?void 0:s.DEPARTAMENTO_ID,NOMBRE_TOUR:s==null?void 0:s.NOMBRE,NOMBRE_COMUNA:s==null?void 0:s.NOMBRE_COMUNA,NOMBRE_REGION:s==null?void 0:s.NOMBRE_REGION,parentTotalCost:b,parentHuesped:y,parentDateSelected:E})]}),e.jsx("div",{className:"mt-36",children:e.jsx(L,{})})]})})};export{ce as default};
