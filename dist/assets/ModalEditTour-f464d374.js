import{i as j,b as _,r as w,j as e,e as t}from"./index-21aef9be.js";import{c as C,a as v,b as q,u as B,o as T,d as z}from"./index.esm-89d4b198.js";import{S as I}from"./sweetalert2.all-3c97b21a.js";import{f as S}from"./ModalCreate-9a1db2ae.js";import{D as P}from"./index.esm-47ae80ff.js";const M="https://fastapi-gv342xsbja-tl.a.run.app/crear_producto",U=async a=>{const n={inventory_name:a.nombre,inventory_description:a.descripcion,inventory_value:a.costo,inventory_penalty:a.multa,department_id:a.departamentoId},d=new URLSearchParams(n).toString(),c=`${M}?${d}`,m={method:"POST",headers:{Accept:"application/json",Authorization:`Bearer ${a.access_token}`}};try{const r=await fetch(c,m);if(!r.ok){const s=await r.text();throw new Error(`API Error (${r.status}): ${s}`)}return await r.json()}catch(r){throw new Error("API Error: "+r.message||"Error al crear el producto")}},V=C({nombre:v().required("El nombre es requerido").min(3,"El nombre debe tener al menos 3 caracteres").max(50,"El nombre debe tener máximo 50 caracteres"),costo:v().required("El costo es requerido").matches(/^\$\d{1,3}(\.\d{3})*$/,"Formato de costo inválido").test("is-valid-number","El costo debe ser un número válido",a=>{const n=parseFloat(a.replace(/[^\d]/g,""));return!isNaN(n)&&n>0&&n<=999999999}),multa:q().typeError("El porcentaje de multa debe ser un número").required("El porcentaje de multa es requerido").min(0,"El porcentaje de multa debe ser mayor o igual a 0").max(1,"El porcentaje de multa debe ser menor o igual a 1"),descripcion:v().required("La descripción es requerida").min(10,"La descripción debe tener al menos 10 caracteres").max(250,"La descripción debe tener máximo 250 caracteres"),departamentoId:q().required("El departamento es requerido")}),F=({onClose:a,showModal:n})=>{const{user:d}=_(),{register:c,handleSubmit:m,formState:{errors:r},getValues:s,setValue:i,reset:x}=B({resolver:T(V)}),N=async l=>{try{const p={access_token:d.access_token,departamentoId:parseInt(l.departamentoId),nombre:l.nombre,costo:parseInt(l.costo.replace(/\$|\.|,/g,"")),multa:l.multa,descripcion:l.descripcion};await U(p),a(),x(),I.fire({icon:"success",title:"Crear inventario",text:"El inventario se ha creado correctamente",confirmButtonText:"Ok"})}catch(p){a(),I.fire({icon:"error",title:"Error al crear el inventario",text:p,confirmButtonText:"Ok"})}},f=l=>{const p=S(l.target.value);i("costo",p)},u="https://fastapi-gv342xsbja-tl.a.run.app/departamentos",[b,g]=w.useState(null);w.useEffect(()=>{const l={method:"GET",headers:{Authorization:`Bearer ${d.access_token}`}};fetch(u,l).then(p=>p.json()).then(p=>{g(p)}).catch(p=>console.log(p))},[d.access_token,u]);const E=l=>{i("departamentoId",l)};return e.jsxs(t.Dialog,{open:n,"aria-labelledby":"modalCrear",size:"lg",className:"max-w-full max-h-screen py-2  overflow-y-scroll",children:[e.jsxs(t.DialogHeader,{className:"border-b-2 border-gray-300 flex justify-between items-start p-5",children:[e.jsx("span",{className:"text-2xl tracking-tight font-extrabold text-gray-900",children:"Crear nuevo inventario "}),e.jsx(t.IconButton,{color:"blue-gray",size:"sm",variant:"text",onClick:()=>{x(),a()},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,className:"h-5 w-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:m(N),children:[e.jsxs(t.DialogBody,{children:[e.jsx(t.Typography,{variant:"h6",children:"Información del Productos"}),e.jsxs("div",{className:"grid grid-cols-2  gap-6  my-12 ",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex justify-between items-center gap-3",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx(t.Input,{type:"text",name:"nombre",color:"blue",label:"Nombre",size:"md",...c("nombre"),error:!!r.nombre,success:!!(!r.nombre&&s("nombre"))}),r.nombre&&e.jsx("div",{className:"absolute left-0   bg-red-500 text-white text-xs mt-1 rounded-lg  px-2",children:r.nombre.message})]}),e.jsxs("div",{className:"relative w-full p-2",children:[e.jsx(t.Select,{color:"blue",className:"text-sm",label:"Departamento disponibles",onChange:l=>E(l),error:!!r.departamentoId,success:!!(!r.departamentoId&&s("departamentoId")),children:b?b.map(l=>e.jsx(t.Option,{value:String(l.DEPARTAMENTO_ID),children:l.NOMBRE},l.DEPARTAMENTO_ID)):e.jsx(t.Option,{value:"0",children:"No hay departamentos disponibles"})}),r.departamentoId&&e.jsx("div",{className:"absolute left-0   bg-red-500 text-white text-xs mt-1 rounded-lg  px-2",children:r.departamentoId.message})]})]}),e.jsxs("div",{className:"flex justify-between items-center gap-3 ",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx(t.Input,{color:"blue",label:"Costo del producto",size:"md",name:"costo",...c("costo"),onChange:f,error:!!r.costo,success:!!(!r.costo&&s("costo")),type:"text"}),r.costo&&e.jsx("div",{className:"absolute left-0  bg-red-500 text-white text-xs mt-1 rounded-lg px-2",children:r.costo.message})]}),e.jsxs("div",{className:"relative w-full",children:[e.jsx(t.Input,{color:"blue",label:"Porcentaje de multa",size:"md",name:"multa",step:.01,min:0,max:1,...c("multa"),error:!!r.multa,success:!!(!r.multa&&s("multa")),type:"number"}),r.multa&&e.jsx("div",{className:"absolute left-0  bg-red-500 text-white text-xs mt-1 rounded-lg px-2",children:r.multa.message})]})]}),e.jsxs("div",{className:"relative w-full",children:[e.jsx(t.Textarea,{color:"blue",label:"Descripción",size:"lg",name:"descripcion",...c("descripcion"),max:250,min:10,type:"text",error:!!r.descripcion,success:!!(!r.descripcion&&s("descripcion"))}),r.descripcion&&e.jsx("div",{className:"absolute left-0  bg-red-500 text-white text-xs mt-1 rounded-lg px-2",children:r.descripcion.message})]})]}),e.jsx("div",{className:"grid w-full grid-cols-1",children:e.jsxs("div",{className:"grid grid-cols-2 w-full h-full gap-2",children:[e.jsx("img",{src:"https://images.pexels.com/photos/2635835/pexels-photo-2635835.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",className:"row-span-1  rounded-l-lg  w-full h-full",alt:"prod1"}),e.jsx("img",{src:"https://images.pexels.com/photos/161124/abbaye-de-senanque-monastery-abbey-notre-dame-de-senanque-161124.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",alt:"prod2",className:" rounded-r-lg  w-full h-full"})]})})]})]}),e.jsxs(t.DialogFooter,{className:"p-2 border-t-2 border-gray-100 gap-4",children:[e.jsx("button",{onClick:()=>{x(),a()},type:"button",className:"text-gray-500 bg-white hover:bg-red-100 focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-sm font-semibold px-5 py-2.5 hover:text-gray-900 focus:outline-none focus:z-10",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"text-white   bg-blue-500 hover:bg-blue-100 focus:ring-4 focus:ring-blue-300 rounded-lg border border-blue-200 text-sm font-semibold px-5 py-2.5 hover:text-blue-900 focus:outline-none focus:z-10",children:"Crear nuevo Inventario"})]})]})]})};F.propTypes={onClose:j.func.isRequired,showModal:j.bool.isRequired,inventarioId:j.number};const H=async a=>{const n=`https://fastapi-gv342xsbja-tl.a.run.app/productos/${a.productosId}`,d={id:a.productosId,inventory_name:a.nombre,inventory_description:a.descripcion,inventory_value:a.costo,inventory_penalty:a.multa},c=new URLSearchParams(d).toString(),m=`${n}?${c}`,r={method:"PUT",headers:{Accept:"application/json",Authorization:`Bearer ${a.access_token}`}};try{const s=await fetch(m,r);if(!s.ok){const i=await s.text();throw new Error(`API Error (${s.status}): ${i}`)}return await s.json()}catch(s){throw new Error("API Error: "+s.message||"Error al actualizar el productos")}},W=C({nombre:v().required("El nombre es requerido").min(3,"El nombre debe tener al menos 3 caracteres").max(50,"El nombre debe tener máximo 50 caracteres"),costo:v().required("El costo es requerido").matches(/^\$\d{1,3}(\.\d{3})*$/,"Formato de costo inválido").test("is-valid-number","El costo debe ser un número válido",a=>{const n=parseFloat(a.replace(/[^\d]/g,""));return!isNaN(n)&&n>0&&n<=999999999}),multa:q().typeError("El porcentaje de multa debe ser un número").required("El porcentaje de multa es requerido").min(0,"El porcentaje de multa debe ser mayor o igual a 0").max(1,"El porcentaje de multa debe ser menor o igual a 1"),descripcion:v().required("La descripción es requerida").min(10,"La descripción debe tener al menos 10 caracteres").max(250,"La descripción debe tener máximo 250 caracteres"),departamentoId:q().required("El departamento es requerido")}),G=({onClose:a,showModal:n,productosId:d})=>{var y;const{user:c}=_(),{register:m,handleSubmit:r,formState:{errors:s},getValues:i,setValue:x,reset:N}=B({resolver:T(W)}),f=async o=>{try{const h={access_token:c.access_token,productosId:d,nombre:o.nombre,descripcion:o.descripcion,costo:parseInt(o.costo.replace(/\$|\.|,/g,"")),multa:o.multa};await H(h),a(),N(),I.fire({icon:"success",title:"¡Producto actualizado!",text:"El productos se ha actualizado correctamente",confirmButtonText:"Ok"})}catch(h){a(),I.fire({icon:"error",title:"Error al actualizar productos",text:h,confirmButtonText:"Ok"})}};function u(o){o=o.toString();const h=o.replace(/\$|\.|,/g,"");return`$${new Intl.NumberFormat().format(h)}`}const b=`https://fastapi-gv342xsbja-tl.a.run.app/productos/${d}`,[g,E]=w.useState(null);w.useEffect(()=>{if(d){const o={method:"GET",headers:{Authorization:`Bearer ${c.access_token}`}};fetch(b,o).then(h=>h.json()).then(h=>{E(h)}).catch(h=>console.log(h))}},[c.access_token,d,b]),w.useEffect(()=>{var o,h,A,L;if(g){x("nombre",(o=g[0])==null?void 0:o.NOMBRE),x("multa",(h=g[0])==null?void 0:h.PORCENTAJE_MULTA);const $=u((A=g[0])==null?void 0:A.VALOR);x("costo",$),x("descripcion",(L=g[0])==null?void 0:L.DESCRIPCION)}},[g,x]);const l=o=>{const h=u(o.target.value);x("costo",h)},p="https://fastapi-gv342xsbja-tl.a.run.app/departamentos",[k,D]=w.useState(null);w.useEffect(()=>{const o={method:"GET",headers:{Authorization:`Bearer ${c.access_token}`}};fetch(p,o).then(h=>h.json()).then(h=>{D(h)}).catch(h=>console.log(h))},[c.access_token,p]);const O=o=>{x("departamentoId",o)};return e.jsxs(t.Dialog,{open:n,"aria-labelledby":"modalEditarProductos",size:"lg",className:"max-w-full max-h-screen py-2  overflow-y-scroll",children:[e.jsxs(t.DialogHeader,{className:"border-b-2 border-gray-300 flex justify-between items-start p-5",children:[e.jsxs("div",{className:"flex justify-start items-center gap-1",children:[e.jsx("span",{className:"text-2xl tracking-tight font-extrabold text-gray-900",children:"Editar Producto "}),g&&e.jsxs("span",{className:"font-normal",children:[" - ",(y=g[0])==null?void 0:y.NOMBRE]})]}),e.jsx(t.IconButton,{color:"blue-gray",size:"sm",variant:"text",onClick:()=>{a()},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,className:"h-5 w-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:r(f),children:[e.jsxs(t.DialogBody,{children:[e.jsx(t.Typography,{variant:"h6",children:"Información de los productos"}),e.jsxs("div",{className:"grid grid-cols-2  gap-6  my-12 ",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center gap-3",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx(t.Input,{type:"text",name:"nombre",color:"blue",label:"Nombre",size:"md",...m("nombre"),error:!!s.nombre,success:!!(!s.nombre&&i("nombre"))}),s.nombre&&e.jsx("div",{className:"absolute left-0   bg-red-500 text-white text-xs mt-1 rounded-lg  px-2",children:s.nombre.message})]}),e.jsx("div",{className:"w-full p-2",children:e.jsx(t.Select,{color:"blue",className:"text-sm",label:"Departamento disponibles",onChange:o=>O(o),error:!!s.departamentoId,success:!!(!s.departamentoId&&i("departamentoId")),children:k?k.map(o=>e.jsx(t.Option,{value:String(o.DEPARTAMENTO_ID),children:o.NOMBRE},o.DEPARTAMENTO_ID)):e.jsx(t.Option,{value:"0",children:"No hay departamentos disponibles"})})})]}),e.jsxs("div",{className:"flex justify-between items-center gap-3 ",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx(t.Input,{color:"blue",label:"Costo del producto",size:"md",name:"costo",...m("costo"),onChange:l,error:!!s.costo,success:!!(!s.costo&&i("costo")),type:"text"}),s.costo&&e.jsx("div",{className:"absolute left-0  bg-red-500 text-white text-xs mt-1 rounded-lg px-2",children:s.costo.message})]}),e.jsxs("div",{className:"relative w-full",children:[e.jsx(t.Input,{color:"blue",label:"Porcentaje de multa",size:"md",name:"multa",step:.01,min:0,max:1,...m("multa"),error:!!s.multa,success:!!(!s.multa&&i("multa")),type:"number"}),s.multa&&e.jsx("div",{className:"absolute left-0  bg-red-500 text-white text-xs mt-1 rounded-lg px-2",children:s.multa.message})]})]}),e.jsxs("div",{className:"relative w-full",children:[e.jsx(t.Textarea,{color:"blue",label:"Descripción",size:"lg",name:"descripcion",...m("descripcion"),max:250,min:10,type:"text",error:!!s.descripcion,success:!!(!s.descripcion&&i("descripcion"))}),s.descripcion&&e.jsx("div",{className:"absolute left-0  bg-red-500 text-white text-xs mt-1 rounded-lg px-2",children:s.descripcion.message})]})]}),e.jsx("div",{className:"grid w-full grid-cols-1",children:e.jsxs("div",{className:"grid grid-cols-2 w-full h-full gap-2",children:[e.jsx("img",{src:"https://images.pexels.com/photos/2635835/pexels-photo-2635835.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",className:"row-span-1  rounded-l-lg  w-full h-full",alt:"prod1"}),e.jsx("img",{src:"https://images.pexels.com/photos/161124/abbaye-de-senanque-monastery-abbey-notre-dame-de-senanque-161124.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",alt:"prod2",className:" rounded-r-lg  w-full h-full"})]})})]})]}),e.jsxs(t.DialogFooter,{className:"p-2 border-t-2 border-gray-100 gap-4",children:[e.jsx("button",{onClick:()=>{a()},type:"button",className:"text-gray-500 bg-white hover:bg-red-100 focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-sm font-semibold px-5 py-2.5 hover:text-gray-900 focus:outline-none focus:z-10",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"text-white   bg-blue-500 hover:bg-blue-100 focus:ring-4 focus:ring-blue-300 rounded-lg border border-blue-200 text-sm font-semibold px-5 py-2.5 hover:text-blue-900 focus:outline-none focus:z-10",children:"Actualizar productos"})]})]})]})};G.propTypes={onClose:j.func.isRequired,showModal:j.bool.isRequired,productosId:j.number};const Y="https://fastapi-gv342xsbja-tl.a.run.app/inventario",J=async a=>{const n={inventory_name:a.nombre,servicioId:a.servicioId,department_id:1},d=new URLSearchParams(n).toString(),c=`${Y}?${d}`,m={method:"PUT",headers:{Accept:"application/json",Authorization:`Bearer ${a.access_token}`}};try{const r=await fetch(c,m);if(!r.ok){const s=await r.text();throw new Error(`API Error (${r.status}): ${s}`)}return await r.json()}catch(r){throw new Error("API Error: "+r.message||"Error al actualizar el servicio")}},K="https://fastapi-gv342xsbja-tl.a.run.app/crear_servicio",X=async a=>{const n={department_id:1,name:a.nombre},d=new URLSearchParams(n).toString(),c=`${K}?${d}`,m={method:"POST",headers:{Accept:"application/json",Authorization:`Bearer ${a.access_token}`}};try{const r=await fetch(c,m);if(!r.ok){const s=await r.text();throw new Error(`API Error (${r.status}): ${s}`)}return await r.json()}catch(r){throw new Error("API Error: "+r.message||"Error al crear el servicio")}},Z=C({nombre:v().required("El nombre es requerido").min(3,"El nombre debe tener al menos 3 caracteres").max(50,"El nombre debe tener máximo 50 caracteres"),active:z().required("Estado requerido")}),Q=({onClose:a,showModal:n})=>{const{user:d}=_(),{register:c,handleSubmit:m,formState:{errors:r},getValues:s,reset:i}=B({resolver:T(Z)}),x=async N=>{try{const f={access_token:d.access_token,nombre:N.nombre,active:N.active?"S":"N"};await X(f),a(),i(),I.fire({icon:"success",title:"Crear servicio",text:"El servicio se ha creado correctamente",confirmButtonText:"Ok"})}catch(f){a(),I.fire({icon:"error",title:"Error al crear el servicio",text:f,confirmButtonText:"Ok"})}};return e.jsxs(t.Dialog,{open:n,"aria-labelledby":"modalCrear",size:"md",className:"max-w-full max-h-screen py-2  overflow-y-scroll",children:[e.jsxs(t.DialogHeader,{className:"border-b-2 border-gray-300 flex justify-between items-start p-5",children:[e.jsx("span",{className:"text-2xl tracking-tight font-extrabold text-gray-900",children:"Crear nuevo servicio "}),e.jsx(t.IconButton,{color:"blue-gray",size:"sm",variant:"text",onClick:()=>{i(),a()},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,className:"h-5 w-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:m(x),children:[e.jsxs(t.DialogBody,{children:[e.jsx(t.Typography,{children:e.jsx("h6",{className:"text-gray-500 text-sm font-bold",children:"Información del servicios"})}),e.jsxs("div",{className:"grid grid-cols-2  gap-6  my-12 ",children:[e.jsxs("div",{className:"relative",children:[e.jsx(t.Input,{type:"text",name:"nombre",color:"blue",label:"Nombre",size:"md",...c("nombre"),error:!!r.nombre,success:!r.nombre&&s("nombre"),max:50,min:3}),r.nombre&&e.jsx("div",{className:"absolute left-0   bg-red-500 text-white text-xs mt-1 rounded-lg  px-2",children:r.nombre.message})]}),e.jsx("div",{className:"flex items-center justify-center ",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx(t.Checkbox,{color:"blue",defaultChecked:!0,size:"sm",name:"active",...c("active"),error:!!r.active,success:!r.active&&s("active")}),"Habilitar servicio"]})})]})]}),e.jsxs(t.DialogFooter,{className:"p-2 border-t-2 border-gray-100 gap-4",children:[e.jsx("button",{onClick:()=>{i(),a()},type:"button",className:"text-gray-500 bg-white hover:bg-red-100 focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-sm font-semibold px-5 py-2.5 hover:text-gray-900 focus:outline-none focus:z-10",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"text-white   bg-blue-500 hover:bg-blue-100 focus:ring-4 focus:ring-blue-300 rounded-lg border border-blue-200 text-sm font-semibold px-5 py-2.5 hover:text-blue-900 focus:outline-none focus:z-10",children:"Crear nuevo servicio"})]})]})]})};Q.propTypes={onClose:j.func.isRequired,showModal:j.bool.isRequired};const ee=C({nombre:v().required("El nombre es requerido").min(3,"El nombre debe tener al menos 3 caracteres").max(50,"El nombre debe tener máximo 50 caracteres"),active:z().required()}),re=({onClose:a,showModal:n,servicioId:d})=>{const{user:c}=_(),{register:m,handleSubmit:r,formState:{errors:s},getValues:i,setValue:x,reset:N}=B({resolver:T(ee)}),f=async E=>{try{const l={access_token:c.access_token,nombre:E.nombre,servicioId:d};await J(l),a(),N(),I.fire({icon:"success",title:"Servicios actualizados con éxito",text:"El servicio se ha actualizado correctamente",confirmButtonText:"Ok"})}catch(l){a(),I.fire({icon:"error",title:"Error al actualizar el servicio",text:l,confirmButtonText:"Ok"})}},u=`https://fastapi-gv342xsbja-tl.a.run.app/servicios/${d}`,[b,g]=w.useState(null);return w.useEffect(()=>{if(d){const E={method:"GET",headers:{Authorization:`Bearer ${c.access_token}`}};fetch(u,E).then(l=>l.json()).then(l=>{g(l)}).catch(l=>console.log(l))}},[c.access_token,d,u]),w.useEffect(()=>{b&&(x("nombre",b==null?void 0:b.NOMBRE),x("active",(b==null?void 0:b.ACTIVE)==="S"))},[b,x]),e.jsxs(t.Dialog,{open:n,"aria-labelledby":"modalCrear",size:"md",className:"max-w-full max-h-screen py-2  overflow-y-scroll",children:[e.jsxs(t.DialogHeader,{className:"border-b-2 border-gray-300 flex justify-between items-start p-5",children:[e.jsxs("span",{className:"text-2xl tracking-tight font-extrabold text-gray-900",children:["Editar servicio",b&&e.jsxs("span",{className:"text-xl text-gray-800 font-normal",children:[" - ",b==null?void 0:b.NOMBRE]})]}),e.jsx(t.IconButton,{color:"blue-gray",size:"sm",variant:"text",onClick:()=>{N(),a()},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,className:"h-5 w-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:r(f),children:[e.jsxs(t.DialogBody,{children:[e.jsx(t.Typography,{children:e.jsx("h6",{className:"text-gray-500 text-sm font-bold",children:"Información del servicios"})}),e.jsxs("div",{className:"grid grid-cols-2  gap-6  my-12 ",children:[e.jsxs("div",{className:"relative",children:[e.jsx(t.Input,{type:"text",name:"nombre",color:"blue",label:"Nombre",size:"md",...m("nombre"),error:!!s.nombre,success:!s.nombre&&i("nombre"),max:50,min:3}),s.nombre&&e.jsx("div",{className:"absolute left-0   bg-red-500 text-white text-xs mt-1 rounded-lg  px-2",children:s.nombre.message})]}),e.jsx("div",{className:"flex items-center justify-center ",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx(t.Checkbox,{color:"blue",size:"sm",name:"active",...m("active"),error:!!s.active,success:!s.active&&i("active")}),"Habilitar servicio"]})})]})]}),e.jsxs(t.DialogFooter,{className:"p-2 border-t-2 border-gray-100 gap-4",children:[e.jsx("button",{onClick:()=>{N(),a()},type:"button",className:"text-gray-500 bg-white hover:bg-red-100 focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-sm font-semibold px-5 py-2.5 hover:text-gray-900 focus:outline-none focus:z-10",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"text-white   bg-blue-500 hover:bg-blue-100 focus:ring-4 focus:ring-blue-300 rounded-lg border border-blue-200 text-sm font-semibold px-5 py-2.5 hover:text-blue-900 focus:outline-none focus:z-10",children:"Actualizar servicio"})]})]})]})};re.propTypes={onClose:j.func.isRequired,showModal:j.bool.isRequired,servicioId:j.number};const se="https://fastapi-gv342xsbja-tl.a.run.app/crear_tour",R=async a=>{const n={tour_name:a.nombre,tour_duration:a.duracion,tour_description:a.descripcion,tour_value:a.precio,tour_capacity:a.capacidad,tour_active:a.active,tour_comuna_id:1},d=new URLSearchParams(n).toString(),c=`${se}?${d}`,m={method:"POST",headers:{Accept:"application/json",Authorization:`Bearer ${a.access_token}`}};try{const r=await fetch(c,m);if(!r.ok){const s=await r.text();throw new Error(`API Error (${r.status}): ${s}`)}return await r.json()}catch(r){throw new Error("API Error: "+r.message||"Error al crear el tour")}},te=C({nombre:v().required("El nombre es requerido").min(3,"El nombre debe tener al menos 3 caracteres").max(50,"El nombre debe tener máximo 50 caracteres"),duracion:q().required("Duración requerida").min(1,"La duración debe ser mayor a 0 Hrs.").max(10,"La duración debe ser menor a 10 Hrs").typeError("La duración debe ser un número entero"),descripcion:v().required("Descripción requerida").min(10,"La descripción debe tener al menos 10 caracteres").max(100,"La descripción debe tener máximo 100 caracteres"),precio:v().required("El costo es requerido").matches(/^\$\d{1,3}(\.\d{3})*$/,"Formato de costo inválido").test("is-valid-number","El costo debe ser un número válido",a=>{const n=parseFloat(a.replace(/[^\d]/g,""));return!isNaN(n)&&n>0&&n<=999999999}),capacidad:q().required("Capacidad requerida").min(1,"La capacidad debe ser mayor a 0 personas").max(100,"La capacidad debe ser menor a 100 personas"),hora:v().required("Hora requerida").min(3,"La hora debe tener al menos 3 caracteres").max(5,"La hora debe tener máximo 5 caracteres"),active:z().required("Estado requerido")}),ae=({onClose:a,showModal:n})=>{const{user:d}=_(),{register:c,handleSubmit:m,formState:{errors:r},setValue:s,getValues:i,reset:x}=B({resolver:T(te)}),N=async p=>{try{const k={access_token:d.access_token,nombre:p.nombre,duracion:p.duracion*60,descripcion:p.descripcion,precio:parseInt(p.precio.replace(/\$|\.|,/g,"")),hora:p.hora,capacidad:p.capacidad,startDate:f.startDate,endDate:f.endDate,active:p.active?"S":"N"};console.log(k),await R(k),a(),x(),I.fire({icon:"success",title:"Crear tour",text:"El tour se ha creado correctamente",confirmButtonText:"Ok"})}catch(k){a(),I.fire({icon:"error",title:"Error al crear el tour",text:k,confirmButtonText:"Ok"})}},[f,u]=w.useState({startDate:null,endDate:null}),b=p=>{u(p)},g=new Date,E=new Date;E.setFullYear(g.getFullYear()+1);const l=p=>{const k=S(p.target.value);s("precio",k)};return e.jsxs(t.Dialog,{open:n,"aria-labelledby":"modalCrear",size:"xl",className:"max-w-full max-h-screen py-2  overflow-y-scroll",children:[e.jsxs(t.DialogHeader,{className:"border-b-2 border-gray-300 flex justify-between items-start p-5",children:[e.jsx("span",{className:"text-2xl tracking-tight font-extrabold text-gray-900",children:"Crear nuevo servicio turismo "}),e.jsx(t.IconButton,{color:"blue-gray",size:"sm",variant:"text",onClick:()=>{x(),a()},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,className:"h-5 w-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:m(N),children:[e.jsxs(t.DialogBody,{children:[e.jsx(t.Typography,{children:e.jsx("h6",{className:"text-gray-500 text-sm font-bold",children:"Información del servicios"})}),e.jsxs("div",{className:"grid grid-cols-2  gap-6 mt-12  mb-32",children:[e.jsxs("div",{className:"relative",children:[e.jsx(t.Input,{type:"text",name:"nombre",color:"blue",label:"Nombre",size:"md",...c("nombre"),error:!!r.nombre,success:!r.nombre&&i("nombre"),max:50,min:3}),r.nombre&&e.jsx("div",{className:"absolute left-0   bg-red-500 text-white text-xs mt-1 rounded-lg  px-2",children:r.nombre.message})]}),e.jsxs("div",{className:"flex justify-between items-center gap-6",children:[e.jsx("div",{className:"border-2 rounded-md border-gray-300 w-full",children:e.jsx(P,{i18n:"es",startWeekOn:"mon",primaryColor:"blue",useRange:!1,value:f,readOnly:!0,onChange:b,minDate:g,maxDate:E,placeholder:"Fecha de tour"})}),e.jsxs("div",{className:"relative w-full",children:[e.jsx(t.Input,{type:"text",name:"hora",color:"blue",label:"Hora",size:"md",...c("hora"),error:!!r.hora,success:!r.hora&&i("hora"),max:50,min:3}),r.hora&&e.jsx("div",{className:"absolute left-0   bg-red-500 text-white text-xs mt-1 rounded-lg  px-2",children:r.hora.message})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(t.Input,{type:"text",name:"precio",color:"blue",label:"Precio",size:"md",...c("precio"),onChange:l,error:!!r.precio,success:!r.precio&&i("precio")}),r.precio&&e.jsx("div",{className:"absolute left-0   bg-red-500 text-white text-xs mt-1 rounded-lg  px-2",children:r.precio.message})]}),e.jsxs("div",{className:"flex justify-between items-center gap-6",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx(t.Input,{type:"number",name:"duracion",color:"blue",label:"Duración",size:"md",...c("duracion"),error:!!r.duracion,success:!r.duracion&&i("duracion")}),r.duracion&&e.jsx("div",{className:"absolute left-0   bg-red-500 text-white text-xs mt-1 rounded-lg  px-2",children:r.duracion.message})]}),e.jsxs("div",{className:"relative w-full",children:[e.jsx(t.Input,{type:"number",name:"capacidad",color:"blue",label:"Capacidad",size:"md",...c("capacidad"),error:!!r.capacidad,success:!r.capacidad&&i("capacidad")}),r.capacidad&&e.jsx("div",{className:"absolute left-0   bg-red-500 text-white text-xs mt-1 rounded-lg  px-2",children:r.capacidad.message})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(t.Textarea,{color:"blue",label:"Descripción",size:"md",name:"descripcion",...c("descripcion"),max:250,min:10,type:"text",error:!!r.descripcion,success:!r.descripcion&&i("descripcion")}),r.descripcion&&e.jsx("div",{className:"absolute left-0  bg-red-500 text-white text-xs mt-1 rounded-lg px-2",children:r.descripcion.message})]}),e.jsx("div",{className:"flex items-center justify-center ",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx(t.Checkbox,{color:"blue",defaultChecked:!0,size:"sm",name:"active",...c("active"),error:!!r.active,success:!r.active&&i("active")}),"Habilitar Tour"]})})]})]}),e.jsxs(t.DialogFooter,{className:"p-2 border-t-2 border-gray-100 gap-4",children:[e.jsx("button",{onClick:()=>{x(),a()},type:"button",className:"text-gray-500 bg-white hover:bg-red-100 focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-sm font-semibold px-5 py-2.5 hover:text-gray-900 focus:outline-none focus:z-10",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"text-white   bg-blue-500 hover:bg-blue-100 focus:ring-4 focus:ring-blue-300 rounded-lg border border-blue-200 text-sm font-semibold px-5 py-2.5 hover:text-blue-900 focus:outline-none focus:z-10",children:"Crear nuevo servicio de turismo"})]})]})]})};ae.propTypes={onClose:j.func.isRequired,showModal:j.bool.isRequired};const oe=C({nombre:v().required("El nombre es requerido").min(3,"El nombre debe tener al menos 3 caracteres").max(50,"El nombre debe tener máximo 50 caracteres"),duracion:q().required("Duración requerida").min(1,"La duración debe ser mayor a 0 Hrs.").max(10,"La duración debe ser menor a 10 Hrs").typeError("La duración debe ser un número entero"),descripcion:v().required("Descripción requerida").min(10,"La descripción debe tener al menos 10 caracteres").max(100,"La descripción debe tener máximo 100 caracteres"),precio:v().required("El costo es requerido").matches(/^\$\d{1,3}(\.\d{3})*$/,"Formato de costo inválido").test("is-valid-number","El costo debe ser un número válido",a=>{const n=parseFloat(a.replace(/[^\d]/g,""));return!isNaN(n)&&n>0&&n<=999999999}),capacidad:q().required("Capacidad requerida").min(1,"La capacidad debe ser mayor a 0 personas").max(100,"La capacidad debe ser menor a 100 personas"),hora:v().required("Hora requerida").min(3,"La hora debe tener al menos 3 caracteres").max(5,"La hora debe tener máximo 5 caracteres"),active:z().required("Estado requerido")}),ne=({onClose:a,showModal:n,tourId:d})=>{const{user:c}=_(),{register:m,handleSubmit:r,formState:{errors:s},setValue:i,getValues:x,reset:N}=B({resolver:T(oe)}),f=`https://fastapi-gv342xsbja-tl.a.run.app/tours/${d}`,[u,b]=w.useState(null);w.useEffect(()=>{d&&fetch(f,{method:"GET"}).then(o=>o.json()).then(o=>{b(o),console.log(o)}).catch(o=>console.log(o))},[d,f]),w.useEffect(()=>{u&&(i("nombre",u==null?void 0:u.NOMBRE_TOUR),i("duracion",u==null?void 0:u.DURACION),i("descripcion",u==null?void 0:u.DESCRIPCION),i("precio",u==null?void 0:u.VALOR_MINIMO),i("capacidad",u==null?void 0:u.CAPACIDAD_PARTICIPANTES),i("active",(u==null?void 0:u.ACTIVO)==="S"))},[u,i]);const g=async y=>{try{const o={access_token:c.access_token,nombre:y.nombre,duracion:y.duracion*60,descripcion:y.descripcion,precio:parseInt(y.precio.replace(/\$|\.|,/g,"")),hora:y.hora,capacidad:y.capacidad,startDate:E.startDate,endDate:E.endDate,active:y.active?"S":"N"};await R(o),a(),N(),I.fire({icon:"success",title:"Crear tour",text:"El tour se ha creado correctamente",confirmButtonText:"Ok"})}catch(o){a(),I.fire({icon:"error",title:"Error al crear el tour",text:o,confirmButtonText:"Ok"})}},[E,l]=w.useState({startDate:null,endDate:null}),p=y=>{l(y)},k=new Date,D=new Date;D.setFullYear(k.getFullYear()+1);const O=y=>{const o=S(y.target.value);i("precio",o)};return e.jsxs(t.Dialog,{open:n,"aria-labelledby":"modalCrear",size:"xl",className:"max-w-full max-h-screen py-2  overflow-y-scroll",children:[e.jsxs(t.DialogHeader,{className:"border-b-2 border-gray-300 flex justify-between items-start p-5",children:[e.jsx("span",{className:"text-2xl tracking-tight font-extrabold text-gray-900",children:"Editar servicio turismo "}),e.jsx(t.IconButton,{color:"blue-gray",size:"sm",variant:"text",onClick:()=>{a()},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,className:"h-5 w-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:r(g),children:[e.jsxs(t.DialogBody,{children:[e.jsx(t.Typography,{children:e.jsx("h6",{className:"text-gray-500 text-sm font-bold",children:"Información del servicios"})}),e.jsxs("div",{className:"grid grid-cols-2  gap-6 mt-12  mb-32",children:[e.jsxs("div",{className:"relative",children:[e.jsx(t.Input,{type:"text",name:"nombre",color:"blue",label:"Nombre",size:"md",...m("nombre"),error:!!s.nombre,success:!s.nombre&&x("nombre"),max:50,min:3}),s.nombre&&e.jsx("div",{className:"absolute left-0   bg-red-500 text-white text-xs mt-1 rounded-lg  px-2",children:s.nombre.message})]}),e.jsxs("div",{className:"flex justify-between items-center gap-6",children:[e.jsx("div",{className:"border-2 rounded-md border-gray-300 w-full",children:e.jsx(P,{i18n:"es",startWeekOn:"mon",primaryColor:"blue",useRange:!1,value:E,readOnly:!0,onChange:p,minDate:k,maxDate:D,placeholder:"Fecha de tour"})}),e.jsxs("div",{className:"relative w-full",children:[e.jsx(t.Input,{type:"text",name:"hora",color:"blue",label:"Hora",size:"md",...m("hora"),error:!!s.hora,success:!s.hora&&x("hora"),max:50,min:3}),s.hora&&e.jsx("div",{className:"absolute left-0   bg-red-500 text-white text-xs mt-1 rounded-lg  px-2",children:s.hora.message})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(t.Input,{type:"text",name:"precio",color:"blue",label:"Precio",size:"md",...m("precio"),onChange:O,error:!!s.precio,success:!s.precio&&x("precio")}),s.precio&&e.jsx("div",{className:"absolute left-0   bg-red-500 text-white text-xs mt-1 rounded-lg  px-2",children:s.precio.message})]}),e.jsxs("div",{className:"flex justify-between items-center gap-6",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx(t.Input,{type:"number",name:"duracion",color:"blue",label:"Duración",size:"md",...m("duracion"),error:!!s.duracion,success:!s.duracion&&x("duracion")}),s.duracion&&e.jsx("div",{className:"absolute left-0   bg-red-500 text-white text-xs mt-1 rounded-lg  px-2",children:s.duracion.message})]}),e.jsxs("div",{className:"relative w-full",children:[e.jsx(t.Input,{type:"number",name:"capacidad",color:"blue",label:"Capacidad",size:"md",...m("capacidad"),error:!!s.capacidad,success:!s.capacidad&&x("capacidad")}),s.capacidad&&e.jsx("div",{className:"absolute left-0   bg-red-500 text-white text-xs mt-1 rounded-lg  px-2",children:s.capacidad.message})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(t.Textarea,{color:"blue",label:"Descripción",size:"md",name:"descripcion",...m("descripcion"),max:250,min:10,type:"text",error:!!s.descripcion,success:!s.descripcion&&x("descripcion")}),s.descripcion&&e.jsx("div",{className:"absolute left-0  bg-red-500 text-white text-xs mt-1 rounded-lg px-2",children:s.descripcion.message})]}),e.jsx("div",{className:"flex items-center justify-center ",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx(t.Checkbox,{color:"blue",defaultChecked:!0,size:"sm",name:"active",...m("active"),error:!!s.active,success:!s.active&&x("active")}),"Habilitar Tour"]})})]})]}),e.jsxs(t.DialogFooter,{className:"p-2 border-t-2 border-gray-100 gap-4",children:[e.jsx("button",{onClick:()=>{a()},type:"button",className:"text-gray-500 bg-white hover:bg-red-100 focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-sm font-semibold px-5 py-2.5 hover:text-gray-900 focus:outline-none focus:z-10",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"text-white   bg-blue-500 hover:bg-blue-100 focus:ring-4 focus:ring-blue-300 rounded-lg border border-blue-200 text-sm font-semibold px-5 py-2.5 hover:text-blue-900 focus:outline-none focus:z-10",children:"Crear nuevo servicio de turismo"})]})]})]})};ne.propTypes={onClose:j.func.isRequired,showModal:j.bool.isRequired,tourId:j.number};export{ae as M,ne as a,F as b,G as c,Q as d,re as e};
