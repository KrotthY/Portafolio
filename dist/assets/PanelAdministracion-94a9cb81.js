import{r as l,b as F,j as e,e as a}from"./index-21aef9be.js";import{f as U,M as G,a as K,b as W,c as J}from"./ModalCreate-9a1db2ae.js";import{S as g}from"./sweetalert2.all-3c97b21a.js";import"./index.esm-89d4b198.js";import"./index.esm-47ae80ff.js";const Q="https://fastapi-gv342xsbja-tl.a.run.app/eliminar_departamento",X=async n=>{const c={name:n.dptoId},d=new URLSearchParams(c).toString();console.log(d);const u=`${Q}?${d}`,h={method:"DELETE",headers:{Accept:"application/json",Authorization:`Bearer ${n.access_token}`}};try{const o=await fetch(u,h);if(console.log(o),!o.ok){const x=await o.text();throw new Error(`API Error (${o.status}): ${x}`)}return await o.json()}catch(o){throw new Error("API Error: "+o.message||"Error al crear el departamento")}},Y="https://fastapi-gv342xsbja-tl.a.run.app/departamentos/admin",ae=()=>{const[n,c]=l.useState(null),[d,u]=l.useState([]),[h,o]=l.useState(""),{user:x}=F(),p=()=>{const t={method:"GET",headers:{Accept:"application/json",Authorization:`Bearer ${x.access_token}`}};fetch(Y,t).then(s=>s.json()).then(s=>{u(s)}).catch(s=>console.log(s))};l.useEffect(()=>{p()},[]);const C=t=>e.jsxs("div",{className:"font-extrabold flex items-center gap-x-6",children:[e.jsx(a.Tooltip,{content:"Editar propiedad",placement:"top",children:e.jsx("button",{onClick:s=>{k(s,t)},className:"rounded-lg  relative w-12 h-10 overflow-x-hidden cursor-pointer flex items-center border border-blue-500 bg-blue-300 group  active:bg-blue-500 active:border-blue-500",href:"{{ route('process.create') }}",children:e.jsx("span",{className:"absolute right-0 h-full w-11 rounded-lg bg-blue-300 hover:bg-blue-500 flex items-center justify-center transform group-hover:translate-x-0 group-hover:w-full transition-all duration-300",children:e.jsx("svg",{style:{fill:"#fff"},xmlns:"http://www.w3.org/2000/svg",height:"1.5rem",viewBox:"0 0 512 512",children:e.jsx("path",{d:"M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"})})})})}),e.jsx(a.Tooltip,{content:"Ver propiedad",placement:"top",children:e.jsx("button",{onClick:s=>{P(s,t)},className:"rounded-lg  relative w-12 h-10 overflow-x-hidden cursor-pointer flex items-center border border-gray-500 bg-gray-300 group active:bg-gray-500 active:border-gray-500",href:"{{ route('process.create') }}",children:e.jsx("span",{className:"absolute right-0 h-full w-11 rounded-lg bg-gray-300 hover:bg-gray-500 flex items-center justify-center transform group-hover:translate-x-0 group-hover:w-full transition-all duration-300",children:e.jsx("svg",{style:{fill:"#000"},xmlns:"http://www.w3.org/2000/svg",height:"1.5rem",viewBox:"0 0 576 512",children:e.jsx("path",{d:"M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"})})})})}),e.jsx(a.Tooltip,{content:"Mantención de propiedad",placement:"top",children:e.jsx("button",{onClick:s=>{_(s,t)},className:"rounded-lg  relative w-12 h-10 overflow-x-hidden cursor-pointer flex items-center border border-yellow-500 bg-yellow-300 group active:bg-yellow-500 active:border-yellow-500",href:"{{ route('process.create') }}",children:e.jsx("span",{className:"absolute right-0 h-full w-11 rounded-lg bg-yellow-300 hover:bg-yellow-500 flex items-center justify-center transform group-hover:translate-x-0 group-hover:w-full transition-all duration-300",children:e.jsx("svg",{style:{fill:"#000"},xmlns:"http://www.w3.org/2000/svg",height:"1.5rem",viewBox:"0 0 512 512",children:e.jsx("path",{d:"M352 320c88.4 0 160-71.6 160-160c0-15.3-2.2-30.1-6.2-44.2c-3.1-10.8-16.4-13.2-24.3-5.3l-76.8 76.8c-3 3-7.1 4.7-11.3 4.7H336c-8.8 0-16-7.2-16-16V118.6c0-4.2 1.7-8.3 4.7-11.3l76.8-76.8c7.9-7.9 5.4-21.2-5.3-24.3C382.1 2.2 367.3 0 352 0C263.6 0 192 71.6 192 160c0 19.1 3.4 37.5 9.5 54.5L19.9 396.1C7.2 408.8 0 426.1 0 444.1C0 481.6 30.4 512 67.9 512c18 0 35.3-7.2 48-19.9L297.5 310.5c17 6.2 35.4 9.5 54.5 9.5zM80 408a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"})})})})}),e.jsx(a.Tooltip,{content:"Borrar propiedad",placement:"top",children:e.jsx("button",{onClick:s=>{$(s)},className:"rounded-lg  relative w-12 h-10 overflow-x-hidden cursor-pointer flex items-center border border-red-500 bg-red-300 group active:bg-red-500 active:border-red-500",href:"{{ route('process.create') }}",children:e.jsx("span",{className:"absolute right-0 h-full w-11 rounded-lg bg-red-300 hover:bg-red-500 flex items-center justify-center transform group-hover:translate-x-0 group-hover:w-full transition-all duration-300",children:e.jsx("svg",{style:{fill:"#fff"},xmlns:"http://www.w3.org/2000/svg",height:"1.5rem",viewBox:"0 0 448 512",children:e.jsx("path",{d:"M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"})})})})})]}),E=t=>{switch(t==="S"?1:t==="N"?2:3){case 1:return e.jsx(a.Chip,{variant:"ghost",color:"green",size:"sm",value:"Activo",icon:e.jsx("span",{className:"mx-auto mt-1 block h-2 w-2 rounded-full bg-green-900 content-['']"})});case 2:return e.jsx(a.Chip,{variant:"ghost",color:"red",size:"sm",value:"Inactivo",icon:e.jsx("span",{className:"mx-auto mt-1 block h-2 w-2  bg-red-900 content-['']"})});case 3:return e.jsx(a.Chip,{variant:"ghost",color:"yellow",size:"sm",value:"Mantención",icon:e.jsx("span",{className:"mx-auto block h-3 w-3 rounded-full bg-red-900 content-['']"})})}},D=t=>{t.key==="Enter"&&t.preventDefault()},f=d.filter(t=>Object.values(t).some(s=>s.toString().toLowerCase().includes(h.toLowerCase()))),m=f.length,i=10,[r,T]=l.useState(1),w=Math.ceil(m/i),v=(r-1)*i+1,S=Math.min(v+i-1,m),j=t=>{T(t)},[A,b]=l.useState(!1),z=t=>{t.preventDefault(),b(!0)},B=()=>{p(),b(!1)},[I,y]=l.useState(!1),k=(t,s)=>{t.preventDefault(),c(s),y(!0)},V=()=>{p(),y(!1)},[O,N]=l.useState(!1),P=(t,s)=>{t.preventDefault(),c(s),N(!0)},L=()=>{N(!1)},[R,M]=l.useState(!1),_=(t,s)=>{t.preventDefault(),c(s),M(!0)},H=()=>{p(),M(!1)},$=t=>{try{const s={access_token:x.access_token,dptoId:t};g.fire({title:"¿Estás seguro?",text:"No podrás revertir esta acción",icon:"warning",showCancelButton:!0,confirmButtonColor:"#4299e1",cancelButtonColor:"#EF4444",confirmButtonText:"Si, borrar departamento",cancelButtonText:"Cancelar"}).then(q=>{q.isConfirmed&&(X(s),console.log(s),g.fire({icon:"success",title:"Departamento eliminado",text:"El departamento se ha eliminado correctamente",confirmButtonText:"Ok"}))})}catch(s){g.fire({icon:"error",title:"Error al crear departamento",text:s,confirmButtonText:"Ok"})}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col items-center ",children:e.jsx(a.Typography,{variant:"h3",children:"Administración de Departamentos"})}),e.jsxs("div",{className:"flex flex-col justify-start gap-2",children:[e.jsx(a.Typography,{variant:"h5",color:"blue-gray",children:"Lista de Departamentos"}),e.jsx(a.Typography,{color:"gray",className:" font-normal",children:"En esta Seccion podras gestionar los departamentos de tu edificio."})]}),e.jsxs("section",{className:"my-3 w-full ",children:[e.jsx("div",{className:"bg-gray-100 p-1",children:e.jsx("div",{className:"mx-auto",children:e.jsxs("div",{className:"bg-white relative shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between space-y-3 md:space-y-0 md:space-x-4 p-4",children:[e.jsx("div",{className:"w-full md:w-1/2",children:e.jsxs("form",{className:"flex items-center",children:[e.jsx("label",{htmlFor:"simple-search",className:"sr-only",children:"Buscar"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx("svg",{"aria-hidden":"true",className:"w-5 h-5 text-red-500 ",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fill:"#000000",fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),e.jsx("input",{type:"text",id:"simple-search",value:h,onChange:t=>o(t.target.value),onKeyDown:D,className:"bg-gray-100 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2",placeholder:"Buscar",required:""})]})]})}),e.jsx("div",{children:e.jsx("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",onClick:z,children:" Crear Departamento "})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left text-gray-500  ",children:[e.jsx("thead",{className:"text-md text-gray-700 bg-blue-100  text-center",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-3 w-auto",children:"ID"}),e.jsx("th",{scope:"col",className:"px-4 py-3 w-auto",children:"Nombre"}),e.jsx("th",{scope:"col",className:"px-4 py-3 w-auto",children:"Estado departamento"}),e.jsx("th",{scope:"col",className:"px-4 py-3 w-auto",children:"Tarifa Diaría"}),e.jsx("th",{scope:"col",className:"px-4 py-3 w-auto",children:"Dirección"}),e.jsx("th",{scope:"col",className:"relative py-3.5 px-4 w-auto",children:"Acciones"})]})}),e.jsx("tbody",{children:f.slice((r-1)*i,r*i).map(t=>e.jsxs("tr",{className:"hover:bg-gray-100 italic text-center",children:[e.jsx("td",{className:"px-4 py-4 text-sm text-gray-700 whitespace-nowrap ",children:t.DEPARTAMENTO_ID}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-500 whitespace-nowrap ",children:t.NOMBRE}),e.jsx("td",{className:"px-4 py-4 ",children:E(t.ACTIVO)}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-500 whitespace-nowrap ",children:U(t.TARIFA_DIARIA)}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-500 whitespace-nowrap ",children:t.DIRECCION}),e.jsx("td",{className:"px-4 py-4 text-sm flex items-center justify-center",children:C(t.DEPARTAMENTO_ID)})]},t.DEPARTAMENTO_ID))})]})}),e.jsxs("nav",{className:"flex flex-col md:flex-row justify-between items-start md:items-center space-y-3 md:space-y-0 p-4","aria-label":"Table navigation",children:[e.jsxs("span",{id:"info",className:"text-sm font-normal text-gray-500 ",children:["Mostrar",e.jsxs("span",{className:"font-semibold text-gray-900 mx-2 ",children:[v,"-",S]}),"de",e.jsx("span",{className:"font-semibold text-gray-900 mx-2 ",children:m})]}),e.jsxs("ul",{className:"inline-flex items-stretch -space-x-px",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>j(r-1),disabled:r<=1,className:`flex items-center justify-center h-full py-1.5 px-3 ml-0 text-gray-500 bg-white rounded-l-lg border border-gray-300 ${r<=1?"cursor-not-allowed":"hover:bg-gray-100 hover:text-gray-700"}`,children:e.jsx("svg",{className:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fill:"#000000",fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})})}),e.jsx("li",{children:e.jsx("span",{className:"flex items-center justify-center text-sm py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700",children:r})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>j(r+1),disabled:r>=w,className:`flex items-center justify-center h-full py-1.5 px-3 leading-tight text-gray-500 bg-white rounded-r-lg border border-gray-300 ${r>=w?"cursor-not-allowed":"hover:bg-gray-100 hover:text-gray-700"}`,children:e.jsx("svg",{className:"w-5 h-5","aria-hidden":"true",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fill:"#000000",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})})]})]})]})})}),e.jsx(G,{onClose:B,showModal:A}),e.jsx(K,{onClose:V,showModal:I,deptoId:n}),e.jsx(W,{onClose:L,showModal:O,deptoId:n}),e.jsx(J,{onClose:H,showModal:R,deptoId:n})]})]})};export{ae as default};
